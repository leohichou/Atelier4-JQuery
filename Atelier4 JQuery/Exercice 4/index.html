<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cascading Dropdowns</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        .container {
            margin-top: 50px;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="form-group">
        <label for="country">Country</label>
        <select class="form-control" id="country">
            <option value="">Select Country</option>
        </select>
    </div>
    <div class="form-group">
        <label for="state">State</label>
        <select class="form-control" id="state" disabled>
            <option value="">Select State</option>
        </select>
    </div>
    <div class="form-group">
        <label for="city">City</label>
        <select class="form-control" id="city" disabled>
            <option value="">Select City</option>
        </select>
    </div>
</div>

<script>
$(document).ready(function() {
  
    $.ajax({
        url: 'getData.php',
        type: 'GET',
        data: { type: 'country' },
        success: function(data) {
            console.log(data); 
            data.forEach(function(country) {
                $('#country').append('<option value="' + country.id + '">' + country.name + '</option>');
            });
        },
        error: function(xhr, status, error) {
            console.error("Error fetching countries:", error); 
        }
    });


    $('#country').change(function() {
        var countryId = $(this).val();
        $('#state').prop('disabled', countryId === '');
        $('#state').html('<option value="">Select State</option>');
        $('#city').html('<option value="">Select City</option>').prop('disabled', true);

        if (countryId !== '') {
            $.ajax({
                url: 'getData.php',
                type: 'GET',
                data: { type: 'state', id: countryId },
                success: function(data) {
                    console.log(data); 
                    data.forEach(function(state) {
                        $('#state').append('<option value="' + state.id + '">' + state.name + '</option>');
                    });
                },
                error: function(xhr, status, error) {
                    console.error("Error fetching states:", error); 
                }
            });
        }
    });

    $('#state').change(function() {
        var stateId = $(this).val();
        $('#city').prop('disabled', stateId === '');
        $('#city').html('<option value="">Select City</option>');

        if (stateId !== '') {
            $.ajax({
                url: 'getData.php',
                type: 'GET',
                data: { type: 'city', id: stateId },
                success: function(data) {
                    console.log(data); 
                    data.forEach(function(city) {
                        $('#city').append('<option value="' + city.id + '">' + city.name + '</option>');
                    });
                },
                error: function(xhr, status, error) {
                    console.error("Error fetching cities:", error); 
                }
            });
        }
    });
});
</script>

</body>
</html>
